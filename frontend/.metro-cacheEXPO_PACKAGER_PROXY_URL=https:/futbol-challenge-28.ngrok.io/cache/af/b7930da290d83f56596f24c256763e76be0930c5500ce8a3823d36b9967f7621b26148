{"dependencies":[{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":78,"index":78}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"socket.io-client","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":79},"end":{"line":2,"column":46,"index":125}}],"key":"LVgCyxgUdze/lYG0kA6DdCAztfM=","exportNames":["*"],"imports":1}},{"name":"expo-constants","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":126},"end":{"line":3,"column":39,"index":165}}],"key":"pPv5KzfRT0rL6NCr7G9k0o4d1W8=","exportNames":["*"],"imports":1}},{"name":"./AuthContext","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":166},"end":{"line":4,"column":40,"index":206}}],"key":"YmpzODa+dVz64UAAYTI+RwJeEt0=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/contexts/SocketContext.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"SocketProvider\", {\n    enumerable: true,\n    get: function () {\n      return SocketProvider;\n    }\n  });\n  Object.defineProperty(exports, \"useSocket\", {\n    enumerable: true,\n    get: function () {\n      return useSocket;\n    }\n  });\n  var _expoVirtualEnv = require(_dependencyMap[0], \"expo/virtual/env\");\n  var _react = require(_dependencyMap[1], \"react\");\n  var _socketIoClient = require(_dependencyMap[2], \"socket.io-client\");\n  var _expoConstants = require(_dependencyMap[3], \"expo-constants\");\n  var Constants = _interopDefault(_expoConstants);\n  var _AuthContext = require(_dependencyMap[4], \"./AuthContext\");\n  var _reactJsxDevRuntime = require(_dependencyMap[5], \"react/jsx-dev-runtime\");\n  const SocketContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  const SocketProvider = ({\n    children\n  }) => {\n    _s();\n    const {\n      user\n    } = (0, _AuthContext.useAuth)();\n    const [socket, setSocket] = (0, _react.useState)(null);\n    const [connected, setConnected] = (0, _react.useState)(false);\n    const [matchFound, setMatchFound] = (0, _react.useState)(null);\n    (0, _react.useEffect)(() => {\n      if (!user) return;\n      const BACKEND_URL = Constants.default.expoConfig?.extra?.EXPO_PUBLIC_BACKEND_URL || _expoVirtualEnv.env.EXPO_PUBLIC_BACKEND_URL || 'http://localhost:8001';\n      const socketInstance = (0, _socketIoClient.io)(BACKEND_URL, {\n        transports: ['websocket', 'polling'],\n        reconnection: true\n      });\n      socketInstance.on('connect', () => {\n        console.log('Socket connected');\n        setConnected(true);\n      });\n      socketInstance.on('disconnect', () => {\n        console.log('Socket disconnected');\n        setConnected(false);\n      });\n      socketInstance.on('match_found', data => {\n        console.log('Match found:', data);\n        setMatchFound(data);\n      });\n      socketInstance.on('searching', data => {\n        console.log('Searching, position:', data.position);\n      });\n      setSocket(socketInstance);\n      return () => {\n        socketInstance.disconnect();\n      };\n    }, [user]);\n    const joinMatchmaking = gameMode => {\n      if (socket && user) {\n        socket.emit('join_matchmaking', {\n          game_mode: gameMode,\n          user_id: user.user_id\n        });\n      }\n    };\n    const leaveMatchmaking = gameMode => {\n      if (socket) {\n        socket.emit('leave_matchmaking', {\n          game_mode: gameMode\n        });\n      }\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(SocketContext.Provider, {\n      value: {\n        socket,\n        connected,\n        joinMatchmaking,\n        leaveMatchmaking,\n        matchFound\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 5\n    }, this);\n  };\n  _s(SocketProvider, \"z+gpbSOgIBOqp8zdZ/6172H2yOI=\", false, function () {\n    return [_AuthContext.useAuth];\n  });\n  _c = SocketProvider;\n  const useSocket = () => {\n    _s2();\n    const context = (0, _react.useContext)(SocketContext);\n    if (!context) {\n      throw new Error('useSocket must be used within SocketProvider');\n    }\n    return context;\n  };\n  _s2(useSocket, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n  var _c;\n  $RefreshReg$(_c, \"SocketProvider\");\n});","lineCount":117,"map":[[15,2,16,0,"Object"],[15,8,16,0],[15,9,16,0,"defineProperty"],[15,23,16,0],[15,24,16,0,"exports"],[15,31,16,0],[16,4,16,0,"enumerable"],[16,14,16,0],[17,4,16,0,"get"],[17,7,16,0],[17,18,16,0,"get"],[17,19,16,0],[18,6,16,0],[18,13,16,0,"SocketProvider"],[18,27,16,0],[19,4,16,0],[20,2,16,0],[21,2,76,0,"Object"],[21,8,76,0],[21,9,76,0,"defineProperty"],[21,23,76,0],[21,24,76,0,"exports"],[21,31,76,0],[22,4,76,0,"enumerable"],[22,14,76,0],[23,4,76,0,"get"],[23,7,76,0],[23,18,76,0,"get"],[23,19,76,0],[24,6,76,0],[24,13,76,0,"useSocket"],[24,22,76,0],[25,4,76,0],[26,2,76,0],[27,2,82,2],[27,6,82,2,"_expoVirtualEnv"],[27,21,82,2],[27,24,82,2,"require"],[27,31,82,2],[27,32,82,2,"_dependencyMap"],[27,46,82,2],[28,2,1,0],[28,6,1,0,"_react"],[28,12,1,0],[28,15,1,0,"require"],[28,22,1,0],[28,23,1,0,"_dependencyMap"],[28,37,1,0],[29,2,2,0],[29,6,2,0,"_socketIoClient"],[29,21,2,0],[29,24,2,0,"require"],[29,31,2,0],[29,32,2,0,"_dependencyMap"],[29,46,2,0],[30,2,3,0],[30,6,3,0,"_expoConstants"],[30,20,3,0],[30,23,3,0,"require"],[30,30,3,0],[30,31,3,0,"_dependencyMap"],[30,45,3,0],[31,2,3,0],[31,6,3,0,"Constants"],[31,15,3,0],[31,18,3,0,"_interopDefault"],[31,33,3,0],[31,34,3,0,"_expoConstants"],[31,48,3,0],[32,2,4,0],[32,6,4,0,"_AuthContext"],[32,18,4,0],[32,21,4,0,"require"],[32,28,4,0],[32,29,4,0,"_dependencyMap"],[32,43,4,0],[33,2,4,40],[33,6,4,40,"_reactJsxDevRuntime"],[33,25,4,40],[33,28,4,40,"require"],[33,35,4,40],[33,36,4,40,"_dependencyMap"],[33,50,4,40],[34,2,14,0],[34,8,14,6,"SocketContext"],[34,21,14,19],[34,37,14,22],[34,41,14,22,"createContext"],[34,47,14,35],[34,48,14,35,"createContext"],[34,61,14,35],[34,63,14,67,"undefined"],[34,72,14,76],[34,73,14,77],[35,2,16,7],[35,8,16,13,"SocketProvider"],[35,22,16,68],[35,25,16,71,"SocketProvider"],[35,26,16,72],[36,4,16,74,"children"],[37,2,16,83],[37,3,16,84],[37,8,16,89],[38,4,16,89,"_s"],[38,6,16,89],[39,4,17,2],[39,10,17,8],[40,6,17,10,"user"],[41,4,17,15],[41,5,17,16],[41,8,17,19],[41,12,17,19,"useAuth"],[41,24,17,26],[41,25,17,26,"useAuth"],[41,32,17,26],[41,34,17,27],[41,35,17,28],[42,4,18,2],[42,10,18,8],[42,11,18,9,"socket"],[42,17,18,15],[42,19,18,17,"setSocket"],[42,28,18,26],[42,29,18,27],[42,32,18,30],[42,36,18,30,"useState"],[42,42,18,38],[42,43,18,38,"useState"],[42,51,18,38],[42,53,18,54],[42,57,18,58],[42,58,18,59],[43,4,19,2],[43,10,19,8],[43,11,19,9,"connected"],[43,20,19,18],[43,22,19,20,"setConnected"],[43,34,19,32],[43,35,19,33],[43,38,19,36],[43,42,19,36,"useState"],[43,48,19,44],[43,49,19,44,"useState"],[43,57,19,44],[43,59,19,45],[43,64,19,50],[43,65,19,51],[44,4,20,2],[44,10,20,8],[44,11,20,9,"matchFound"],[44,21,20,19],[44,23,20,21,"setMatchFound"],[44,36,20,34],[44,37,20,35],[44,40,20,38],[44,44,20,38,"useState"],[44,50,20,46],[44,51,20,46,"useState"],[44,59,20,46],[44,61,20,93],[44,65,20,97],[44,66,20,98],[45,4,22,2],[45,8,22,2,"useEffect"],[45,14,22,11],[45,15,22,11,"useEffect"],[45,24,22,11],[45,26,22,12],[45,32,22,18],[46,6,23,4],[46,10,23,8],[46,11,23,9,"user"],[46,15,23,13],[46,17,23,15],[47,6,25,4],[47,12,25,10,"BACKEND_URL"],[47,23,25,21],[47,26,25,24,"Constants"],[47,35,25,33],[47,36,25,33,"default"],[47,43,25,33],[47,44,25,34,"expoConfig"],[47,54,25,44],[47,56,25,46,"extra"],[47,61,25,51],[47,63,25,53,"EXPO_PUBLIC_BACKEND_URL"],[47,86,25,76],[47,90,25,76,"_expoVirtualEnv"],[47,105,25,76],[47,106,25,76,"env"],[47,109,25,76],[47,110,25,76,"EXPO_PUBLIC_BACKEND_URL"],[47,133,25,115],[47,137,25,119],[47,160,25,142],[48,6,26,4],[48,12,26,10,"socketInstance"],[48,26,26,24],[48,29,26,27],[48,33,26,27,"io"],[48,48,26,29],[48,49,26,29,"io"],[48,51,26,29],[48,53,26,30,"BACKEND_URL"],[48,64,26,41],[48,66,26,43],[49,8,27,6,"transports"],[49,18,27,16],[49,20,27,18],[49,21,27,19],[49,32,27,30],[49,34,27,32],[49,43,27,41],[49,44,27,42],[50,8,28,6,"reconnection"],[50,20,28,18],[50,22,28,20],[51,6,29,4],[51,7,29,5],[51,8,29,6],[52,6,31,4,"socketInstance"],[52,20,31,18],[52,21,31,19,"on"],[52,23,31,21],[52,24,31,22],[52,33,31,31],[52,35,31,33],[52,41,31,39],[53,8,32,6,"console"],[53,15,32,13],[53,16,32,14,"log"],[53,19,32,17],[53,20,32,18],[53,38,32,36],[53,39,32,37],[54,8,33,6,"setConnected"],[54,20,33,18],[54,21,33,19],[54,25,33,23],[54,26,33,24],[55,6,34,4],[55,7,34,5],[55,8,34,6],[56,6,36,4,"socketInstance"],[56,20,36,18],[56,21,36,19,"on"],[56,23,36,21],[56,24,36,22],[56,36,36,34],[56,38,36,36],[56,44,36,42],[57,8,37,6,"console"],[57,15,37,13],[57,16,37,14,"log"],[57,19,37,17],[57,20,37,18],[57,41,37,39],[57,42,37,40],[58,8,38,6,"setConnected"],[58,20,38,18],[58,21,38,19],[58,26,38,24],[58,27,38,25],[59,6,39,4],[59,7,39,5],[59,8,39,6],[60,6,41,4,"socketInstance"],[60,20,41,18],[60,21,41,19,"on"],[60,23,41,21],[60,24,41,22],[60,37,41,35],[60,39,41,38,"data"],[60,43,41,42],[60,47,41,47],[61,8,42,6,"console"],[61,15,42,13],[61,16,42,14,"log"],[61,19,42,17],[61,20,42,18],[61,34,42,32],[61,36,42,34,"data"],[61,40,42,38],[61,41,42,39],[62,8,43,6,"setMatchFound"],[62,21,43,19],[62,22,43,20,"data"],[62,26,43,24],[62,27,43,25],[63,6,44,4],[63,7,44,5],[63,8,44,6],[64,6,46,4,"socketInstance"],[64,20,46,18],[64,21,46,19,"on"],[64,23,46,21],[64,24,46,22],[64,35,46,33],[64,37,46,36,"data"],[64,41,46,40],[64,45,46,45],[65,8,47,6,"console"],[65,15,47,13],[65,16,47,14,"log"],[65,19,47,17],[65,20,47,18],[65,42,47,40],[65,44,47,42,"data"],[65,48,47,46],[65,49,47,47,"position"],[65,57,47,55],[65,58,47,56],[66,6,48,4],[66,7,48,5],[66,8,48,6],[67,6,50,4,"setSocket"],[67,15,50,13],[67,16,50,14,"socketInstance"],[67,30,50,28],[67,31,50,29],[68,6,52,4],[68,13,52,11],[68,19,52,17],[69,8,53,6,"socketInstance"],[69,22,53,20],[69,23,53,21,"disconnect"],[69,33,53,31],[69,34,53,32],[69,35,53,33],[70,6,54,4],[70,7,54,5],[71,4,55,2],[71,5,55,3],[71,7,55,5],[71,8,55,6,"user"],[71,12,55,10],[71,13,55,11],[71,14,55,12],[72,4,57,2],[72,10,57,8,"joinMatchmaking"],[72,25,57,23],[72,28,57,27,"gameMode"],[72,36,57,43],[72,40,57,48],[73,6,58,4],[73,10,58,8,"socket"],[73,16,58,14],[73,20,58,18,"user"],[73,24,58,22],[73,26,58,24],[74,8,59,6,"socket"],[74,14,59,12],[74,15,59,13,"emit"],[74,19,59,17],[74,20,59,18],[74,38,59,36],[74,40,59,38],[75,10,59,40,"game_mode"],[75,19,59,49],[75,21,59,51,"gameMode"],[75,29,59,59],[76,10,59,61,"user_id"],[76,17,59,68],[76,19,59,70,"user"],[76,23,59,74],[76,24,59,75,"user_id"],[77,8,59,83],[77,9,59,84],[77,10,59,85],[78,6,60,4],[79,4,61,2],[79,5,61,3],[80,4,63,2],[80,10,63,8,"leaveMatchmaking"],[80,26,63,24],[80,29,63,28,"gameMode"],[80,37,63,44],[80,41,63,49],[81,6,64,4],[81,10,64,8,"socket"],[81,16,64,14],[81,18,64,16],[82,8,65,6,"socket"],[82,14,65,12],[82,15,65,13,"emit"],[82,19,65,17],[82,20,65,18],[82,39,65,37],[82,41,65,39],[83,10,65,41,"game_mode"],[83,19,65,50],[83,21,65,52,"gameMode"],[84,8,65,61],[84,9,65,62],[84,10,65,63],[85,6,66,4],[86,4,67,2],[86,5,67,3],[87,4,69,2],[87,24,70,4],[87,28,70,4,"_reactJsxDevRuntime"],[87,47,70,4],[87,48,70,4,"jsxDEV"],[87,54,70,4],[87,56,70,5,"SocketContext"],[87,69,70,18],[87,70,70,19,"Provider"],[87,78,70,27],[88,6,70,28,"value"],[88,11,70,33],[88,13,70,35],[89,8,70,37,"socket"],[89,14,70,43],[90,8,70,45,"connected"],[90,17,70,54],[91,8,70,56,"joinMatchmaking"],[91,23,70,71],[92,8,70,73,"leaveMatchmaking"],[92,24,70,89],[93,8,70,91,"matchFound"],[94,6,70,102],[94,7,70,104],[95,6,70,104,"children"],[95,14,70,104],[95,16,71,7,"children"],[96,4,71,15],[97,6,71,15,"fileName"],[97,14,71,15],[97,16,71,15,"_jsxFileName"],[97,28,71,15],[98,6,71,15,"lineNumber"],[98,16,71,15],[99,6,71,15,"columnNumber"],[99,18,71,15],[100,4,71,15],[100,11,72,28],[100,12,72,29],[101,2,74,0],[101,3,74,1],[102,2,74,2,"_s"],[102,4,74,2],[102,5,16,13,"SocketProvider"],[102,19,16,68],[103,4,16,68],[103,12,17,19,"useAuth"],[103,24,17,26],[103,25,17,26,"useAuth"],[103,32,17,26],[104,2,17,26],[105,2,17,26,"_c"],[105,4,17,26],[105,7,16,13,"SocketProvider"],[105,21,16,68],[106,2,76,7],[106,8,76,13,"useSocket"],[106,17,76,22],[106,20,76,25,"useSocket"],[106,21,76,25],[106,26,76,31],[107,4,76,31,"_s2"],[107,7,76,31],[108,4,77,2],[108,10,77,8,"context"],[108,17,77,15],[108,20,77,18],[108,24,77,18,"useContext"],[108,30,77,28],[108,31,77,28,"useContext"],[108,41,77,28],[108,43,77,29,"SocketContext"],[108,56,77,42],[108,57,77,43],[109,4,78,2],[109,8,78,6],[109,9,78,7,"context"],[109,16,78,14],[109,18,78,16],[110,6,79,4],[110,12,79,10],[110,16,79,14,"Error"],[110,21,79,19],[110,22,79,20],[110,68,79,66],[110,69,79,67],[111,4,80,2],[112,4,81,2],[112,11,81,9,"context"],[112,18,81,16],[113,2,82,0],[113,3,82,1],[114,2,82,2,"_s2"],[114,5,82,2],[114,6,76,13,"useSocket"],[114,15,76,22],[115,2,76,22],[115,6,76,22,"_c"],[115,8,76,22],[116,2,76,22,"$RefreshReg$"],[116,14,76,22],[116,15,76,22,"_c"],[116,17,76,22],[117,0,76,22],[117,3]],"functionMap":{"names":["<global>","SocketProvider","useEffect$argument_0","socketInstance.on$argument_1","<anonymous>","joinMatchmaking","leaveMatchmaking","useSocket"],"mappings":"AAA;uECe;YCM;iCCS;KDG;oCCE;KDG;qCCE;KDG;mCCE;KDE;WEI;KFE;GDC;0BIE;GJI;2BKE;GLI;CDO;yBOE;CPM"},"hasCjsExports":false},"type":"js/module"}]}