{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":78,"index":78}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"socket.io-client","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":79},"end":{"line":2,"column":46,"index":125}}],"key":"LVgCyxgUdze/lYG0kA6DdCAztfM=","exportNames":["*"],"imports":1}},{"name":"expo-constants","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":126},"end":{"line":3,"column":39,"index":165}}],"key":"pPv5KzfRT0rL6NCr7G9k0o4d1W8=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/contexts/SocketContext.tsx\";\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"SocketProvider\", {\n    enumerable: true,\n    get: function () {\n      return SocketProvider;\n    }\n  });\n  Object.defineProperty(exports, \"useSocket\", {\n    enumerable: true,\n    get: function () {\n      return useSocket;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _socketIoClient = require(_dependencyMap[1], \"socket.io-client\");\n  var _expoConstants = require(_dependencyMap[2], \"expo-constants\");\n  var Constants = _interopDefault(_expoConstants);\n  var _reactJsxDevRuntime = require(_dependencyMap[3], \"react/jsx-dev-runtime\");\n  const SocketContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  const SocketProvider = ({\n    children\n  }) => {\n    const [socket, setSocket] = (0, _react.useState)(null);\n    const [connected, setConnected] = (0, _react.useState)(false);\n    const [matchFound, setMatchFound] = (0, _react.useState)(null);\n    (0, _react.useEffect)(() => {\n      // Socket is optional for now (bot mode doesn't need it)\n      const BACKEND_URL = Constants.default.expoConfig?.extra?.EXPO_PUBLIC_BACKEND_URL || process.env.EXPO_PUBLIC_BACKEND_URL || 'http://localhost:8001';\n      try {\n        const socketInstance = (0, _socketIoClient.io)(BACKEND_URL, {\n          transports: ['websocket', 'polling'],\n          reconnection: true,\n          reconnectionAttempts: 3\n        });\n        socketInstance.on('connect', () => {\n          console.log('Socket connected');\n          setConnected(true);\n        });\n        socketInstance.on('disconnect', () => {\n          console.log('Socket disconnected');\n          setConnected(false);\n        });\n        socketInstance.on('match_found', data => {\n          console.log('Match found:', data);\n          setMatchFound(data);\n        });\n        socketInstance.on('searching', data => {\n          console.log('Searching, position:', data.position);\n        });\n        setSocket(socketInstance);\n        return () => {\n          socketInstance.disconnect();\n        };\n      } catch (error) {\n        console.log('Socket connection failed, bot mode only');\n      }\n    }, []);\n    const joinMatchmaking = gameMode => {\n      if (socket) {\n        socket.emit('join_matchmaking', {\n          game_mode: gameMode,\n          user_id: 'guest_' + Date.now()\n        });\n      }\n    };\n    const leaveMatchmaking = gameMode => {\n      if (socket) {\n        socket.emit('leave_matchmaking', {\n          game_mode: gameMode\n        });\n      }\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(SocketContext.Provider, {\n      value: {\n        socket,\n        connected,\n        joinMatchmaking,\n        leaveMatchmaking,\n        matchFound\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 5\n    }, this);\n  };\n  const useSocket = () => {\n    const context = (0, _react.useContext)(SocketContext);\n    if (!context) {\n      throw new Error('useSocket must be used within SocketProvider');\n    }\n    return context;\n  };\n});","lineCount":106,"map":[[13,2,15,0,"Object"],[13,8,15,0],[13,9,15,0,"defineProperty"],[13,23,15,0],[13,24,15,0,"exports"],[13,31,15,0],[14,4,15,0,"enumerable"],[14,14,15,0],[15,4,15,0,"get"],[15,7,15,0],[15,18,15,0,"get"],[15,19,15,0],[16,6,15,0],[16,13,15,0,"SocketProvider"],[16,27,15,0],[17,4,15,0],[18,2,15,0],[19,2,79,0,"Object"],[19,8,79,0],[19,9,79,0,"defineProperty"],[19,23,79,0],[19,24,79,0,"exports"],[19,31,79,0],[20,4,79,0,"enumerable"],[20,14,79,0],[21,4,79,0,"get"],[21,7,79,0],[21,18,79,0,"get"],[21,19,79,0],[22,6,79,0],[22,13,79,0,"useSocket"],[22,22,79,0],[23,4,79,0],[24,2,79,0],[25,2,1,0],[25,6,1,0,"_react"],[25,12,1,0],[25,15,1,0,"require"],[25,22,1,0],[25,23,1,0,"_dependencyMap"],[25,37,1,0],[26,2,2,0],[26,6,2,0,"_socketIoClient"],[26,21,2,0],[26,24,2,0,"require"],[26,31,2,0],[26,32,2,0,"_dependencyMap"],[26,46,2,0],[27,2,3,0],[27,6,3,0,"_expoConstants"],[27,20,3,0],[27,23,3,0,"require"],[27,30,3,0],[27,31,3,0,"_dependencyMap"],[27,45,3,0],[28,2,3,0],[28,6,3,0,"Constants"],[28,15,3,0],[28,18,3,0,"_interopDefault"],[28,33,3,0],[28,34,3,0,"_expoConstants"],[28,48,3,0],[29,2,3,39],[29,6,3,39,"_reactJsxDevRuntime"],[29,25,3,39],[29,28,3,39,"require"],[29,35,3,39],[29,36,3,39,"_dependencyMap"],[29,50,3,39],[30,2,13,0],[30,8,13,6,"SocketContext"],[30,21,13,19],[30,37,13,22],[30,41,13,22,"createContext"],[30,47,13,35],[30,48,13,35,"createContext"],[30,61,13,35],[30,63,13,67,"undefined"],[30,72,13,76],[30,73,13,77],[31,2,15,7],[31,8,15,13,"SocketProvider"],[31,22,15,68],[31,25,15,71,"SocketProvider"],[31,26,15,72],[32,4,15,74,"children"],[33,2,15,83],[33,3,15,84],[33,8,15,89],[34,4,16,2],[34,10,16,8],[34,11,16,9,"socket"],[34,17,16,15],[34,19,16,17,"setSocket"],[34,28,16,26],[34,29,16,27],[34,32,16,30],[34,36,16,30,"useState"],[34,42,16,38],[34,43,16,38,"useState"],[34,51,16,38],[34,53,16,54],[34,57,16,58],[34,58,16,59],[35,4,17,2],[35,10,17,8],[35,11,17,9,"connected"],[35,20,17,18],[35,22,17,20,"setConnected"],[35,34,17,32],[35,35,17,33],[35,38,17,36],[35,42,17,36,"useState"],[35,48,17,44],[35,49,17,44,"useState"],[35,57,17,44],[35,59,17,45],[35,64,17,50],[35,65,17,51],[36,4,18,2],[36,10,18,8],[36,11,18,9,"matchFound"],[36,21,18,19],[36,23,18,21,"setMatchFound"],[36,36,18,34],[36,37,18,35],[36,40,18,38],[36,44,18,38,"useState"],[36,50,18,46],[36,51,18,46,"useState"],[36,59,18,46],[36,61,18,93],[36,65,18,97],[36,66,18,98],[37,4,20,2],[37,8,20,2,"useEffect"],[37,14,20,11],[37,15,20,11,"useEffect"],[37,24,20,11],[37,26,20,12],[37,32,20,18],[38,6,21,4],[39,6,22,4],[39,12,22,10,"BACKEND_URL"],[39,23,22,21],[39,26,22,24,"Constants"],[39,35,22,33],[39,36,22,33,"default"],[39,43,22,33],[39,44,22,34,"expoConfig"],[39,54,22,44],[39,56,22,46,"extra"],[39,61,22,51],[39,63,22,53,"EXPO_PUBLIC_BACKEND_URL"],[39,86,22,76],[39,90,22,80,"process"],[39,97,22,87],[39,98,22,88,"env"],[39,101,22,91],[39,102,22,92,"EXPO_PUBLIC_BACKEND_URL"],[39,125,22,115],[39,129,22,119],[39,152,22,142],[40,6,24,4],[40,10,24,8],[41,8,25,6],[41,14,25,12,"socketInstance"],[41,28,25,26],[41,31,25,29],[41,35,25,29,"io"],[41,50,25,31],[41,51,25,31,"io"],[41,53,25,31],[41,55,25,32,"BACKEND_URL"],[41,66,25,43],[41,68,25,45],[42,10,26,8,"transports"],[42,20,26,18],[42,22,26,20],[42,23,26,21],[42,34,26,32],[42,36,26,34],[42,45,26,43],[42,46,26,44],[43,10,27,8,"reconnection"],[43,22,27,20],[43,24,27,22],[43,28,27,26],[44,10,28,8,"reconnectionAttempts"],[44,30,28,28],[44,32,28,30],[45,8,29,6],[45,9,29,7],[45,10,29,8],[46,8,31,6,"socketInstance"],[46,22,31,20],[46,23,31,21,"on"],[46,25,31,23],[46,26,31,24],[46,35,31,33],[46,37,31,35],[46,43,31,41],[47,10,32,8,"console"],[47,17,32,15],[47,18,32,16,"log"],[47,21,32,19],[47,22,32,20],[47,40,32,38],[47,41,32,39],[48,10,33,8,"setConnected"],[48,22,33,20],[48,23,33,21],[48,27,33,25],[48,28,33,26],[49,8,34,6],[49,9,34,7],[49,10,34,8],[50,8,36,6,"socketInstance"],[50,22,36,20],[50,23,36,21,"on"],[50,25,36,23],[50,26,36,24],[50,38,36,36],[50,40,36,38],[50,46,36,44],[51,10,37,8,"console"],[51,17,37,15],[51,18,37,16,"log"],[51,21,37,19],[51,22,37,20],[51,43,37,41],[51,44,37,42],[52,10,38,8,"setConnected"],[52,22,38,20],[52,23,38,21],[52,28,38,26],[52,29,38,27],[53,8,39,6],[53,9,39,7],[53,10,39,8],[54,8,41,6,"socketInstance"],[54,22,41,20],[54,23,41,21,"on"],[54,25,41,23],[54,26,41,24],[54,39,41,37],[54,41,41,40,"data"],[54,45,41,44],[54,49,41,49],[55,10,42,8,"console"],[55,17,42,15],[55,18,42,16,"log"],[55,21,42,19],[55,22,42,20],[55,36,42,34],[55,38,42,36,"data"],[55,42,42,40],[55,43,42,41],[56,10,43,8,"setMatchFound"],[56,23,43,21],[56,24,43,22,"data"],[56,28,43,26],[56,29,43,27],[57,8,44,6],[57,9,44,7],[57,10,44,8],[58,8,46,6,"socketInstance"],[58,22,46,20],[58,23,46,21,"on"],[58,25,46,23],[58,26,46,24],[58,37,46,35],[58,39,46,38,"data"],[58,43,46,42],[58,47,46,47],[59,10,47,8,"console"],[59,17,47,15],[59,18,47,16,"log"],[59,21,47,19],[59,22,47,20],[59,44,47,42],[59,46,47,44,"data"],[59,50,47,48],[59,51,47,49,"position"],[59,59,47,57],[59,60,47,58],[60,8,48,6],[60,9,48,7],[60,10,48,8],[61,8,50,6,"setSocket"],[61,17,50,15],[61,18,50,16,"socketInstance"],[61,32,50,30],[61,33,50,31],[62,8,52,6],[62,15,52,13],[62,21,52,19],[63,10,53,8,"socketInstance"],[63,24,53,22],[63,25,53,23,"disconnect"],[63,35,53,33],[63,36,53,34],[63,37,53,35],[64,8,54,6],[64,9,54,7],[65,6,55,4],[65,7,55,5],[65,8,55,6],[65,15,55,13,"error"],[65,20,55,18],[65,22,55,20],[66,8,56,6,"console"],[66,15,56,13],[66,16,56,14,"log"],[66,19,56,17],[66,20,56,18],[66,61,56,59],[66,62,56,60],[67,6,57,4],[68,4,58,2],[68,5,58,3],[68,7,58,5],[68,9,58,7],[68,10,58,8],[69,4,60,2],[69,10,60,8,"joinMatchmaking"],[69,25,60,23],[69,28,60,27,"gameMode"],[69,36,60,43],[69,40,60,48],[70,6,61,4],[70,10,61,8,"socket"],[70,16,61,14],[70,18,61,16],[71,8,62,6,"socket"],[71,14,62,12],[71,15,62,13,"emit"],[71,19,62,17],[71,20,62,18],[71,38,62,36],[71,40,62,38],[72,10,62,40,"game_mode"],[72,19,62,49],[72,21,62,51,"gameMode"],[72,29,62,59],[73,10,62,61,"user_id"],[73,17,62,68],[73,19,62,70],[73,27,62,78],[73,30,62,81,"Date"],[73,34,62,85],[73,35,62,86,"now"],[73,38,62,89],[73,39,62,90],[74,8,62,92],[74,9,62,93],[74,10,62,94],[75,6,63,4],[76,4,64,2],[76,5,64,3],[77,4,66,2],[77,10,66,8,"leaveMatchmaking"],[77,26,66,24],[77,29,66,28,"gameMode"],[77,37,66,44],[77,41,66,49],[78,6,67,4],[78,10,67,8,"socket"],[78,16,67,14],[78,18,67,16],[79,8,68,6,"socket"],[79,14,68,12],[79,15,68,13,"emit"],[79,19,68,17],[79,20,68,18],[79,39,68,37],[79,41,68,39],[80,10,68,41,"game_mode"],[80,19,68,50],[80,21,68,52,"gameMode"],[81,8,68,61],[81,9,68,62],[81,10,68,63],[82,6,69,4],[83,4,70,2],[83,5,70,3],[84,4,72,2],[84,24,73,4],[84,28,73,4,"_reactJsxDevRuntime"],[84,47,73,4],[84,48,73,4,"jsxDEV"],[84,54,73,4],[84,56,73,5,"SocketContext"],[84,69,73,18],[84,70,73,19,"Provider"],[84,78,73,27],[85,6,73,28,"value"],[85,11,73,33],[85,13,73,35],[86,8,73,37,"socket"],[86,14,73,43],[87,8,73,45,"connected"],[87,17,73,54],[88,8,73,56,"joinMatchmaking"],[88,23,73,71],[89,8,73,73,"leaveMatchmaking"],[89,24,73,89],[90,8,73,91,"matchFound"],[91,6,73,102],[91,7,73,104],[92,6,73,104,"children"],[92,14,73,104],[92,16,74,7,"children"],[93,4,74,15],[94,6,74,15,"fileName"],[94,14,74,15],[94,16,74,15,"_jsxFileName"],[94,28,74,15],[95,6,74,15,"lineNumber"],[95,16,74,15],[96,6,74,15,"columnNumber"],[96,18,74,15],[97,4,74,15],[97,11,75,28],[97,12,75,29],[98,2,77,0],[98,3,77,1],[99,2,79,7],[99,8,79,13,"useSocket"],[99,17,79,22],[99,20,79,25,"useSocket"],[99,21,79,25],[99,26,79,31],[100,4,80,2],[100,10,80,8,"context"],[100,17,80,15],[100,20,80,18],[100,24,80,18,"useContext"],[100,30,80,28],[100,31,80,28,"useContext"],[100,41,80,28],[100,43,80,29,"SocketContext"],[100,56,80,42],[100,57,80,43],[101,4,81,2],[101,8,81,6],[101,9,81,7,"context"],[101,16,81,14],[101,18,81,16],[102,6,82,4],[102,12,82,10],[102,16,82,14,"Error"],[102,21,82,19],[102,22,82,20],[102,68,82,66],[102,69,82,67],[103,4,83,2],[104,4,84,2],[104,11,84,9,"context"],[104,18,84,16],[105,2,85,0],[105,3,85,1],[106,0,85,2],[106,3]],"functionMap":{"names":["<global>","SocketProvider","useEffect$argument_0","socketInstance.on$argument_1","<anonymous>","joinMatchmaking","leaveMatchmaking","useSocket"],"mappings":"AAA;uECc;YCK;mCCW;ODG;sCCE;ODG;uCCE;ODG;qCCE;ODE;aEI;OFE;GDI;0BIE;GJI;2BKE;GLI;CDO;yBOE;CPM"},"hasCjsExports":false},"type":"js/module"}]}