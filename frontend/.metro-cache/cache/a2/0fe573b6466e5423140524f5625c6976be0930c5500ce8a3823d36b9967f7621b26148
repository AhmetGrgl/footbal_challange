{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":78,"index":78}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"socket.io-client","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":79},"end":{"line":2,"column":46,"index":125}}],"key":"LVgCyxgUdze/lYG0kA6DdCAztfM=","exportNames":["*"],"imports":1}},{"name":"expo-constants","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":126},"end":{"line":3,"column":39,"index":165}}],"key":"pPv5KzfRT0rL6NCr7G9k0o4d1W8=","exportNames":["*"],"imports":1}},{"name":"./AuthContext","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":166},"end":{"line":4,"column":40,"index":206}}],"key":"YmpzODa+dVz64UAAYTI+RwJeEt0=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/contexts/SocketContext.tsx\";\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"SocketProvider\", {\n    enumerable: true,\n    get: function () {\n      return SocketProvider;\n    }\n  });\n  Object.defineProperty(exports, \"useSocket\", {\n    enumerable: true,\n    get: function () {\n      return useSocket;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _socketIoClient = require(_dependencyMap[1], \"socket.io-client\");\n  var _expoConstants = require(_dependencyMap[2], \"expo-constants\");\n  var Constants = _interopDefault(_expoConstants);\n  var _AuthContext = require(_dependencyMap[3], \"./AuthContext\");\n  var _reactJsxDevRuntime = require(_dependencyMap[4], \"react/jsx-dev-runtime\");\n  const SocketContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  const SocketProvider = ({\n    children\n  }) => {\n    const {\n      user\n    } = (0, _AuthContext.useAuth)();\n    const [socket, setSocket] = (0, _react.useState)(null);\n    const [connected, setConnected] = (0, _react.useState)(false);\n    const [matchFound, setMatchFound] = (0, _react.useState)(null);\n    (0, _react.useEffect)(() => {\n      if (!user) return;\n      const BACKEND_URL = Constants.default.expoConfig?.extra?.EXPO_PUBLIC_BACKEND_URL || process.env.EXPO_PUBLIC_BACKEND_URL || 'http://localhost:8001';\n      const socketInstance = (0, _socketIoClient.io)(BACKEND_URL, {\n        transports: ['websocket', 'polling'],\n        reconnection: true\n      });\n      socketInstance.on('connect', () => {\n        console.log('Socket connected');\n        setConnected(true);\n      });\n      socketInstance.on('disconnect', () => {\n        console.log('Socket disconnected');\n        setConnected(false);\n      });\n      socketInstance.on('match_found', data => {\n        console.log('Match found:', data);\n        setMatchFound(data);\n      });\n      socketInstance.on('searching', data => {\n        console.log('Searching, position:', data.position);\n      });\n      setSocket(socketInstance);\n      return () => {\n        socketInstance.disconnect();\n      };\n    }, [user]);\n    const joinMatchmaking = gameMode => {\n      if (socket && user) {\n        socket.emit('join_matchmaking', {\n          game_mode: gameMode,\n          user_id: user.user_id\n        });\n      }\n    };\n    const leaveMatchmaking = gameMode => {\n      if (socket) {\n        socket.emit('leave_matchmaking', {\n          game_mode: gameMode\n        });\n      }\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(SocketContext.Provider, {\n      value: {\n        socket,\n        connected,\n        joinMatchmaking,\n        leaveMatchmaking,\n        matchFound\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 5\n    }, this);\n  };\n  const useSocket = () => {\n    const context = (0, _react.useContext)(SocketContext);\n    if (!context) {\n      throw new Error('useSocket must be used within SocketProvider');\n    }\n    return context;\n  };\n});","lineCount":105,"map":[[13,2,16,0,"Object"],[13,8,16,0],[13,9,16,0,"defineProperty"],[13,23,16,0],[13,24,16,0,"exports"],[13,31,16,0],[14,4,16,0,"enumerable"],[14,14,16,0],[15,4,16,0,"get"],[15,7,16,0],[15,18,16,0,"get"],[15,19,16,0],[16,6,16,0],[16,13,16,0,"SocketProvider"],[16,27,16,0],[17,4,16,0],[18,2,16,0],[19,2,76,0,"Object"],[19,8,76,0],[19,9,76,0,"defineProperty"],[19,23,76,0],[19,24,76,0,"exports"],[19,31,76,0],[20,4,76,0,"enumerable"],[20,14,76,0],[21,4,76,0,"get"],[21,7,76,0],[21,18,76,0,"get"],[21,19,76,0],[22,6,76,0],[22,13,76,0,"useSocket"],[22,22,76,0],[23,4,76,0],[24,2,76,0],[25,2,1,0],[25,6,1,0,"_react"],[25,12,1,0],[25,15,1,0,"require"],[25,22,1,0],[25,23,1,0,"_dependencyMap"],[25,37,1,0],[26,2,2,0],[26,6,2,0,"_socketIoClient"],[26,21,2,0],[26,24,2,0,"require"],[26,31,2,0],[26,32,2,0,"_dependencyMap"],[26,46,2,0],[27,2,3,0],[27,6,3,0,"_expoConstants"],[27,20,3,0],[27,23,3,0,"require"],[27,30,3,0],[27,31,3,0,"_dependencyMap"],[27,45,3,0],[28,2,3,0],[28,6,3,0,"Constants"],[28,15,3,0],[28,18,3,0,"_interopDefault"],[28,33,3,0],[28,34,3,0,"_expoConstants"],[28,48,3,0],[29,2,4,0],[29,6,4,0,"_AuthContext"],[29,18,4,0],[29,21,4,0,"require"],[29,28,4,0],[29,29,4,0,"_dependencyMap"],[29,43,4,0],[30,2,4,40],[30,6,4,40,"_reactJsxDevRuntime"],[30,25,4,40],[30,28,4,40,"require"],[30,35,4,40],[30,36,4,40,"_dependencyMap"],[30,50,4,40],[31,2,14,0],[31,8,14,6,"SocketContext"],[31,21,14,19],[31,37,14,22],[31,41,14,22,"createContext"],[31,47,14,35],[31,48,14,35,"createContext"],[31,61,14,35],[31,63,14,67,"undefined"],[31,72,14,76],[31,73,14,77],[32,2,16,7],[32,8,16,13,"SocketProvider"],[32,22,16,68],[32,25,16,71,"SocketProvider"],[32,26,16,72],[33,4,16,74,"children"],[34,2,16,83],[34,3,16,84],[34,8,16,89],[35,4,17,2],[35,10,17,8],[36,6,17,10,"user"],[37,4,17,15],[37,5,17,16],[37,8,17,19],[37,12,17,19,"useAuth"],[37,24,17,26],[37,25,17,26,"useAuth"],[37,32,17,26],[37,34,17,27],[37,35,17,28],[38,4,18,2],[38,10,18,8],[38,11,18,9,"socket"],[38,17,18,15],[38,19,18,17,"setSocket"],[38,28,18,26],[38,29,18,27],[38,32,18,30],[38,36,18,30,"useState"],[38,42,18,38],[38,43,18,38,"useState"],[38,51,18,38],[38,53,18,54],[38,57,18,58],[38,58,18,59],[39,4,19,2],[39,10,19,8],[39,11,19,9,"connected"],[39,20,19,18],[39,22,19,20,"setConnected"],[39,34,19,32],[39,35,19,33],[39,38,19,36],[39,42,19,36,"useState"],[39,48,19,44],[39,49,19,44,"useState"],[39,57,19,44],[39,59,19,45],[39,64,19,50],[39,65,19,51],[40,4,20,2],[40,10,20,8],[40,11,20,9,"matchFound"],[40,21,20,19],[40,23,20,21,"setMatchFound"],[40,36,20,34],[40,37,20,35],[40,40,20,38],[40,44,20,38,"useState"],[40,50,20,46],[40,51,20,46,"useState"],[40,59,20,46],[40,61,20,93],[40,65,20,97],[40,66,20,98],[41,4,22,2],[41,8,22,2,"useEffect"],[41,14,22,11],[41,15,22,11,"useEffect"],[41,24,22,11],[41,26,22,12],[41,32,22,18],[42,6,23,4],[42,10,23,8],[42,11,23,9,"user"],[42,15,23,13],[42,17,23,15],[43,6,25,4],[43,12,25,10,"BACKEND_URL"],[43,23,25,21],[43,26,25,24,"Constants"],[43,35,25,33],[43,36,25,33,"default"],[43,43,25,33],[43,44,25,34,"expoConfig"],[43,54,25,44],[43,56,25,46,"extra"],[43,61,25,51],[43,63,25,53,"EXPO_PUBLIC_BACKEND_URL"],[43,86,25,76],[43,90,25,80,"process"],[43,97,25,87],[43,98,25,88,"env"],[43,101,25,91],[43,102,25,92,"EXPO_PUBLIC_BACKEND_URL"],[43,125,25,115],[43,129,25,119],[43,152,25,142],[44,6,26,4],[44,12,26,10,"socketInstance"],[44,26,26,24],[44,29,26,27],[44,33,26,27,"io"],[44,48,26,29],[44,49,26,29,"io"],[44,51,26,29],[44,53,26,30,"BACKEND_URL"],[44,64,26,41],[44,66,26,43],[45,8,27,6,"transports"],[45,18,27,16],[45,20,27,18],[45,21,27,19],[45,32,27,30],[45,34,27,32],[45,43,27,41],[45,44,27,42],[46,8,28,6,"reconnection"],[46,20,28,18],[46,22,28,20],[47,6,29,4],[47,7,29,5],[47,8,29,6],[48,6,31,4,"socketInstance"],[48,20,31,18],[48,21,31,19,"on"],[48,23,31,21],[48,24,31,22],[48,33,31,31],[48,35,31,33],[48,41,31,39],[49,8,32,6,"console"],[49,15,32,13],[49,16,32,14,"log"],[49,19,32,17],[49,20,32,18],[49,38,32,36],[49,39,32,37],[50,8,33,6,"setConnected"],[50,20,33,18],[50,21,33,19],[50,25,33,23],[50,26,33,24],[51,6,34,4],[51,7,34,5],[51,8,34,6],[52,6,36,4,"socketInstance"],[52,20,36,18],[52,21,36,19,"on"],[52,23,36,21],[52,24,36,22],[52,36,36,34],[52,38,36,36],[52,44,36,42],[53,8,37,6,"console"],[53,15,37,13],[53,16,37,14,"log"],[53,19,37,17],[53,20,37,18],[53,41,37,39],[53,42,37,40],[54,8,38,6,"setConnected"],[54,20,38,18],[54,21,38,19],[54,26,38,24],[54,27,38,25],[55,6,39,4],[55,7,39,5],[55,8,39,6],[56,6,41,4,"socketInstance"],[56,20,41,18],[56,21,41,19,"on"],[56,23,41,21],[56,24,41,22],[56,37,41,35],[56,39,41,38,"data"],[56,43,41,42],[56,47,41,47],[57,8,42,6,"console"],[57,15,42,13],[57,16,42,14,"log"],[57,19,42,17],[57,20,42,18],[57,34,42,32],[57,36,42,34,"data"],[57,40,42,38],[57,41,42,39],[58,8,43,6,"setMatchFound"],[58,21,43,19],[58,22,43,20,"data"],[58,26,43,24],[58,27,43,25],[59,6,44,4],[59,7,44,5],[59,8,44,6],[60,6,46,4,"socketInstance"],[60,20,46,18],[60,21,46,19,"on"],[60,23,46,21],[60,24,46,22],[60,35,46,33],[60,37,46,36,"data"],[60,41,46,40],[60,45,46,45],[61,8,47,6,"console"],[61,15,47,13],[61,16,47,14,"log"],[61,19,47,17],[61,20,47,18],[61,42,47,40],[61,44,47,42,"data"],[61,48,47,46],[61,49,47,47,"position"],[61,57,47,55],[61,58,47,56],[62,6,48,4],[62,7,48,5],[62,8,48,6],[63,6,50,4,"setSocket"],[63,15,50,13],[63,16,50,14,"socketInstance"],[63,30,50,28],[63,31,50,29],[64,6,52,4],[64,13,52,11],[64,19,52,17],[65,8,53,6,"socketInstance"],[65,22,53,20],[65,23,53,21,"disconnect"],[65,33,53,31],[65,34,53,32],[65,35,53,33],[66,6,54,4],[66,7,54,5],[67,4,55,2],[67,5,55,3],[67,7,55,5],[67,8,55,6,"user"],[67,12,55,10],[67,13,55,11],[67,14,55,12],[68,4,57,2],[68,10,57,8,"joinMatchmaking"],[68,25,57,23],[68,28,57,27,"gameMode"],[68,36,57,43],[68,40,57,48],[69,6,58,4],[69,10,58,8,"socket"],[69,16,58,14],[69,20,58,18,"user"],[69,24,58,22],[69,26,58,24],[70,8,59,6,"socket"],[70,14,59,12],[70,15,59,13,"emit"],[70,19,59,17],[70,20,59,18],[70,38,59,36],[70,40,59,38],[71,10,59,40,"game_mode"],[71,19,59,49],[71,21,59,51,"gameMode"],[71,29,59,59],[72,10,59,61,"user_id"],[72,17,59,68],[72,19,59,70,"user"],[72,23,59,74],[72,24,59,75,"user_id"],[73,8,59,83],[73,9,59,84],[73,10,59,85],[74,6,60,4],[75,4,61,2],[75,5,61,3],[76,4,63,2],[76,10,63,8,"leaveMatchmaking"],[76,26,63,24],[76,29,63,28,"gameMode"],[76,37,63,44],[76,41,63,49],[77,6,64,4],[77,10,64,8,"socket"],[77,16,64,14],[77,18,64,16],[78,8,65,6,"socket"],[78,14,65,12],[78,15,65,13,"emit"],[78,19,65,17],[78,20,65,18],[78,39,65,37],[78,41,65,39],[79,10,65,41,"game_mode"],[79,19,65,50],[79,21,65,52,"gameMode"],[80,8,65,61],[80,9,65,62],[80,10,65,63],[81,6,66,4],[82,4,67,2],[82,5,67,3],[83,4,69,2],[83,24,70,4],[83,28,70,4,"_reactJsxDevRuntime"],[83,47,70,4],[83,48,70,4,"jsxDEV"],[83,54,70,4],[83,56,70,5,"SocketContext"],[83,69,70,18],[83,70,70,19,"Provider"],[83,78,70,27],[84,6,70,28,"value"],[84,11,70,33],[84,13,70,35],[85,8,70,37,"socket"],[85,14,70,43],[86,8,70,45,"connected"],[86,17,70,54],[87,8,70,56,"joinMatchmaking"],[87,23,70,71],[88,8,70,73,"leaveMatchmaking"],[88,24,70,89],[89,8,70,91,"matchFound"],[90,6,70,102],[90,7,70,104],[91,6,70,104,"children"],[91,14,70,104],[91,16,71,7,"children"],[92,4,71,15],[93,6,71,15,"fileName"],[93,14,71,15],[93,16,71,15,"_jsxFileName"],[93,28,71,15],[94,6,71,15,"lineNumber"],[94,16,71,15],[95,6,71,15,"columnNumber"],[95,18,71,15],[96,4,71,15],[96,11,72,28],[96,12,72,29],[97,2,74,0],[97,3,74,1],[98,2,76,7],[98,8,76,13,"useSocket"],[98,17,76,22],[98,20,76,25,"useSocket"],[98,21,76,25],[98,26,76,31],[99,4,77,2],[99,10,77,8,"context"],[99,17,77,15],[99,20,77,18],[99,24,77,18,"useContext"],[99,30,77,28],[99,31,77,28,"useContext"],[99,41,77,28],[99,43,77,29,"SocketContext"],[99,56,77,42],[99,57,77,43],[100,4,78,2],[100,8,78,6],[100,9,78,7,"context"],[100,16,78,14],[100,18,78,16],[101,6,79,4],[101,12,79,10],[101,16,79,14,"Error"],[101,21,79,19],[101,22,79,20],[101,68,79,66],[101,69,79,67],[102,4,80,2],[103,4,81,2],[103,11,81,9,"context"],[103,18,81,16],[104,2,82,0],[104,3,82,1],[105,0,82,2],[105,3]],"functionMap":{"names":["<global>","SocketProvider","useEffect$argument_0","socketInstance.on$argument_1","<anonymous>","joinMatchmaking","leaveMatchmaking","useSocket"],"mappings":"AAA;uECe;YCM;iCCS;KDG;oCCE;KDG;qCCE;KDG;mCCE;KDE;WEI;KFE;GDC;0BIE;GJI;2BKE;GLI;CDO;yBOE;CPM"},"hasCjsExports":false},"type":"js/module"}]}