{"dependencies":[{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/slicedToArray","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"5y7e5+zC7teYEEC6niD9f5zII1M=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":78,"index":78}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"socket.io-client","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":79},"end":{"line":2,"column":46,"index":125}}],"key":"LVgCyxgUdze/lYG0kA6DdCAztfM=","exportNames":["*"],"imports":1}},{"name":"expo-constants","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":126},"end":{"line":3,"column":39,"index":165}}],"key":"pPv5KzfRT0rL6NCr7G9k0o4d1W8=","exportNames":["*"],"imports":1}},{"name":"./AuthContext","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":166},"end":{"line":4,"column":40,"index":206}}],"key":"YmpzODa+dVz64UAAYTI+RwJeEt0=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/contexts/SocketContext.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"SocketProvider\", {\n    enumerable: true,\n    get: function () {\n      return SocketProvider;\n    }\n  });\n  Object.defineProperty(exports, \"useSocket\", {\n    enumerable: true,\n    get: function () {\n      return useSocket;\n    }\n  });\n  var _expoVirtualEnv = require(_dependencyMap[0], \"expo/virtual/env\");\n  var _babelRuntimeHelpersSlicedToArray = require(_dependencyMap[1], \"@babel/runtime/helpers/slicedToArray\");\n  var _slicedToArray = _interopDefault(_babelRuntimeHelpersSlicedToArray);\n  var _react = require(_dependencyMap[2], \"react\");\n  var _socketIoClient = require(_dependencyMap[3], \"socket.io-client\");\n  var _expoConstants = require(_dependencyMap[4], \"expo-constants\");\n  var Constants = _interopDefault(_expoConstants);\n  var _AuthContext = require(_dependencyMap[5], \"./AuthContext\");\n  var _reactJsxDevRuntime = require(_dependencyMap[6], \"react/jsx-dev-runtime\");\n  var SocketContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  var SocketProvider = _ref => {\n    _s();\n    var children = _ref.children;\n    var _useAuth = (0, _AuthContext.useAuth)(),\n      user = _useAuth.user;\n    var _useState = (0, _react.useState)(null),\n      _useState2 = (0, _slicedToArray.default)(_useState, 2),\n      socket = _useState2[0],\n      setSocket = _useState2[1];\n    var _useState3 = (0, _react.useState)(false),\n      _useState4 = (0, _slicedToArray.default)(_useState3, 2),\n      connected = _useState4[0],\n      setConnected = _useState4[1];\n    var _useState5 = (0, _react.useState)(null),\n      _useState6 = (0, _slicedToArray.default)(_useState5, 2),\n      matchFound = _useState6[0],\n      setMatchFound = _useState6[1];\n    (0, _react.useEffect)(() => {\n      if (!user) return;\n      var BACKEND_URL = Constants.default.expoConfig?.extra?.EXPO_PUBLIC_BACKEND_URL || _expoVirtualEnv.env.EXPO_PUBLIC_BACKEND_URL || 'http://localhost:8001';\n      var socketInstance = (0, _socketIoClient.io)(BACKEND_URL, {\n        transports: ['websocket', 'polling'],\n        reconnection: true\n      });\n      socketInstance.on('connect', () => {\n        console.log('Socket connected');\n        setConnected(true);\n      });\n      socketInstance.on('disconnect', () => {\n        console.log('Socket disconnected');\n        setConnected(false);\n      });\n      socketInstance.on('match_found', data => {\n        console.log('Match found:', data);\n        setMatchFound(data);\n      });\n      socketInstance.on('searching', data => {\n        console.log('Searching, position:', data.position);\n      });\n      setSocket(socketInstance);\n      return () => {\n        socketInstance.disconnect();\n      };\n    }, [user]);\n    var joinMatchmaking = gameMode => {\n      if (socket && user) {\n        socket.emit('join_matchmaking', {\n          game_mode: gameMode,\n          user_id: user.user_id\n        });\n      }\n    };\n    var leaveMatchmaking = gameMode => {\n      if (socket) {\n        socket.emit('leave_matchmaking', {\n          game_mode: gameMode\n        });\n      }\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(SocketContext.Provider, {\n      value: {\n        socket,\n        connected,\n        joinMatchmaking,\n        leaveMatchmaking,\n        matchFound\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 5\n    }, this);\n  };\n  _s(SocketProvider, \"z+gpbSOgIBOqp8zdZ/6172H2yOI=\", false, function () {\n    return [_AuthContext.useAuth];\n  });\n  _c = SocketProvider;\n  var useSocket = () => {\n    _s2();\n    var context = (0, _react.useContext)(SocketContext);\n    if (!context) {\n      throw new Error('useSocket must be used within SocketProvider');\n    }\n    return context;\n  };\n  _s2(useSocket, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n  var _c;\n  $RefreshReg$(_c, \"SocketProvider\");\n});","lineCount":126,"map":[[15,2,16,0,"Object"],[15,8,16,0],[15,9,16,0,"defineProperty"],[15,23,16,0],[15,24,16,0,"exports"],[15,31,16,0],[16,4,16,0,"enumerable"],[16,14,16,0],[17,4,16,0,"get"],[17,7,16,0],[17,18,16,0,"get"],[17,19,16,0],[18,6,16,0],[18,13,16,0,"SocketProvider"],[18,27,16,0],[19,4,16,0],[20,2,16,0],[21,2,76,0,"Object"],[21,8,76,0],[21,9,76,0,"defineProperty"],[21,23,76,0],[21,24,76,0,"exports"],[21,31,76,0],[22,4,76,0,"enumerable"],[22,14,76,0],[23,4,76,0,"get"],[23,7,76,0],[23,18,76,0,"get"],[23,19,76,0],[24,6,76,0],[24,13,76,0,"useSocket"],[24,22,76,0],[25,4,76,0],[26,2,76,0],[27,2,82,2],[27,6,82,2,"_expoVirtualEnv"],[27,21,82,2],[27,24,82,2,"require"],[27,31,82,2],[27,32,82,2,"_dependencyMap"],[27,46,82,2],[28,2,82,2],[28,6,82,2,"_babelRuntimeHelpersSlicedToArray"],[28,39,82,2],[28,42,82,2,"require"],[28,49,82,2],[28,50,82,2,"_dependencyMap"],[28,64,82,2],[29,2,82,2],[29,6,82,2,"_slicedToArray"],[29,20,82,2],[29,23,82,2,"_interopDefault"],[29,38,82,2],[29,39,82,2,"_babelRuntimeHelpersSlicedToArray"],[29,72,82,2],[30,2,1,0],[30,6,1,0,"_react"],[30,12,1,0],[30,15,1,0,"require"],[30,22,1,0],[30,23,1,0,"_dependencyMap"],[30,37,1,0],[31,2,2,0],[31,6,2,0,"_socketIoClient"],[31,21,2,0],[31,24,2,0,"require"],[31,31,2,0],[31,32,2,0,"_dependencyMap"],[31,46,2,0],[32,2,3,0],[32,6,3,0,"_expoConstants"],[32,20,3,0],[32,23,3,0,"require"],[32,30,3,0],[32,31,3,0,"_dependencyMap"],[32,45,3,0],[33,2,3,0],[33,6,3,0,"Constants"],[33,15,3,0],[33,18,3,0,"_interopDefault"],[33,33,3,0],[33,34,3,0,"_expoConstants"],[33,48,3,0],[34,2,4,0],[34,6,4,0,"_AuthContext"],[34,18,4,0],[34,21,4,0,"require"],[34,28,4,0],[34,29,4,0,"_dependencyMap"],[34,43,4,0],[35,2,4,40],[35,6,4,40,"_reactJsxDevRuntime"],[35,25,4,40],[35,28,4,40,"require"],[35,35,4,40],[35,36,4,40,"_dependencyMap"],[35,50,4,40],[36,2,14,0],[36,6,14,6,"SocketContext"],[36,19,14,19],[36,35,14,22],[36,39,14,22,"createContext"],[36,45,14,35],[36,46,14,35,"createContext"],[36,59,14,35],[36,61,14,67,"undefined"],[36,70,14,76],[36,71,14,77],[37,2,16,7],[37,6,16,13,"SocketProvider"],[37,20,16,68],[37,23,16,71,"_ref"],[37,27,16,71],[37,31,16,89],[38,4,16,89,"_s"],[38,6,16,89],[39,4,16,89],[39,8,16,74,"children"],[39,16,16,82],[39,19,16,82,"_ref"],[39,23,16,82],[39,24,16,74,"children"],[39,32,16,82],[40,4,17,2],[40,8,17,2,"_useAuth"],[40,16,17,2],[40,19,17,19],[40,23,17,19,"useAuth"],[40,35,17,26],[40,36,17,26,"useAuth"],[40,43,17,26],[40,45,17,27],[40,46,17,28],[41,6,17,10,"user"],[41,10,17,14],[41,13,17,14,"_useAuth"],[41,21,17,14],[41,22,17,10,"user"],[41,26,17,14],[42,4,18,2],[42,8,18,2,"_useState"],[42,17,18,2],[42,20,18,30],[42,24,18,30,"useState"],[42,30,18,38],[42,31,18,38,"useState"],[42,39,18,38],[42,41,18,54],[42,45,18,58],[42,46,18,59],[43,6,18,59,"_useState2"],[43,16,18,59],[43,23,18,59,"_slicedToArray"],[43,37,18,59],[43,38,18,59,"default"],[43,45,18,59],[43,47,18,59,"_useState"],[43,56,18,59],[44,6,18,9,"socket"],[44,12,18,15],[44,15,18,15,"_useState2"],[44,25,18,15],[45,6,18,17,"setSocket"],[45,15,18,26],[45,18,18,26,"_useState2"],[45,28,18,26],[46,4,19,2],[46,8,19,2,"_useState3"],[46,18,19,2],[46,21,19,36],[46,25,19,36,"useState"],[46,31,19,44],[46,32,19,44,"useState"],[46,40,19,44],[46,42,19,45],[46,47,19,50],[46,48,19,51],[47,6,19,51,"_useState4"],[47,16,19,51],[47,23,19,51,"_slicedToArray"],[47,37,19,51],[47,38,19,51,"default"],[47,45,19,51],[47,47,19,51,"_useState3"],[47,57,19,51],[48,6,19,9,"connected"],[48,15,19,18],[48,18,19,18,"_useState4"],[48,28,19,18],[49,6,19,20,"setConnected"],[49,18,19,32],[49,21,19,32,"_useState4"],[49,31,19,32],[50,4,20,2],[50,8,20,2,"_useState5"],[50,18,20,2],[50,21,20,38],[50,25,20,38,"useState"],[50,31,20,46],[50,32,20,46,"useState"],[50,40,20,46],[50,42,20,93],[50,46,20,97],[50,47,20,98],[51,6,20,98,"_useState6"],[51,16,20,98],[51,23,20,98,"_slicedToArray"],[51,37,20,98],[51,38,20,98,"default"],[51,45,20,98],[51,47,20,98,"_useState5"],[51,57,20,98],[52,6,20,9,"matchFound"],[52,16,20,19],[52,19,20,19,"_useState6"],[52,29,20,19],[53,6,20,21,"setMatchFound"],[53,19,20,34],[53,22,20,34,"_useState6"],[53,32,20,34],[54,4,22,2],[54,8,22,2,"useEffect"],[54,14,22,11],[54,15,22,11,"useEffect"],[54,24,22,11],[54,26,22,12],[54,32,22,18],[55,6,23,4],[55,10,23,8],[55,11,23,9,"user"],[55,15,23,13],[55,17,23,15],[56,6,25,4],[56,10,25,10,"BACKEND_URL"],[56,21,25,21],[56,24,25,24,"Constants"],[56,33,25,33],[56,34,25,33,"default"],[56,41,25,33],[56,42,25,34,"expoConfig"],[56,52,25,44],[56,54,25,46,"extra"],[56,59,25,51],[56,61,25,53,"EXPO_PUBLIC_BACKEND_URL"],[56,84,25,76],[56,88,25,76,"_expoVirtualEnv"],[56,103,25,76],[56,104,25,76,"env"],[56,107,25,76],[56,108,25,76,"EXPO_PUBLIC_BACKEND_URL"],[56,131,25,115],[56,135,25,119],[56,158,25,142],[57,6,26,4],[57,10,26,10,"socketInstance"],[57,24,26,24],[57,27,26,27],[57,31,26,27,"io"],[57,46,26,29],[57,47,26,29,"io"],[57,49,26,29],[57,51,26,30,"BACKEND_URL"],[57,62,26,41],[57,64,26,43],[58,8,27,6,"transports"],[58,18,27,16],[58,20,27,18],[58,21,27,19],[58,32,27,30],[58,34,27,32],[58,43,27,41],[58,44,27,42],[59,8,28,6,"reconnection"],[59,20,28,18],[59,22,28,20],[60,6,29,4],[60,7,29,5],[60,8,29,6],[61,6,31,4,"socketInstance"],[61,20,31,18],[61,21,31,19,"on"],[61,23,31,21],[61,24,31,22],[61,33,31,31],[61,35,31,33],[61,41,31,39],[62,8,32,6,"console"],[62,15,32,13],[62,16,32,14,"log"],[62,19,32,17],[62,20,32,18],[62,38,32,36],[62,39,32,37],[63,8,33,6,"setConnected"],[63,20,33,18],[63,21,33,19],[63,25,33,23],[63,26,33,24],[64,6,34,4],[64,7,34,5],[64,8,34,6],[65,6,36,4,"socketInstance"],[65,20,36,18],[65,21,36,19,"on"],[65,23,36,21],[65,24,36,22],[65,36,36,34],[65,38,36,36],[65,44,36,42],[66,8,37,6,"console"],[66,15,37,13],[66,16,37,14,"log"],[66,19,37,17],[66,20,37,18],[66,41,37,39],[66,42,37,40],[67,8,38,6,"setConnected"],[67,20,38,18],[67,21,38,19],[67,26,38,24],[67,27,38,25],[68,6,39,4],[68,7,39,5],[68,8,39,6],[69,6,41,4,"socketInstance"],[69,20,41,18],[69,21,41,19,"on"],[69,23,41,21],[69,24,41,22],[69,37,41,35],[69,39,41,38,"data"],[69,43,41,42],[69,47,41,47],[70,8,42,6,"console"],[70,15,42,13],[70,16,42,14,"log"],[70,19,42,17],[70,20,42,18],[70,34,42,32],[70,36,42,34,"data"],[70,40,42,38],[70,41,42,39],[71,8,43,6,"setMatchFound"],[71,21,43,19],[71,22,43,20,"data"],[71,26,43,24],[71,27,43,25],[72,6,44,4],[72,7,44,5],[72,8,44,6],[73,6,46,4,"socketInstance"],[73,20,46,18],[73,21,46,19,"on"],[73,23,46,21],[73,24,46,22],[73,35,46,33],[73,37,46,36,"data"],[73,41,46,40],[73,45,46,45],[74,8,47,6,"console"],[74,15,47,13],[74,16,47,14,"log"],[74,19,47,17],[74,20,47,18],[74,42,47,40],[74,44,47,42,"data"],[74,48,47,46],[74,49,47,47,"position"],[74,57,47,55],[74,58,47,56],[75,6,48,4],[75,7,48,5],[75,8,48,6],[76,6,50,4,"setSocket"],[76,15,50,13],[76,16,50,14,"socketInstance"],[76,30,50,28],[76,31,50,29],[77,6,52,4],[77,13,52,11],[77,19,52,17],[78,8,53,6,"socketInstance"],[78,22,53,20],[78,23,53,21,"disconnect"],[78,33,53,31],[78,34,53,32],[78,35,53,33],[79,6,54,4],[79,7,54,5],[80,4,55,2],[80,5,55,3],[80,7,55,5],[80,8,55,6,"user"],[80,12,55,10],[80,13,55,11],[80,14,55,12],[81,4,57,2],[81,8,57,8,"joinMatchmaking"],[81,23,57,23],[81,26,57,27,"gameMode"],[81,34,57,43],[81,38,57,48],[82,6,58,4],[82,10,58,8,"socket"],[82,16,58,14],[82,20,58,18,"user"],[82,24,58,22],[82,26,58,24],[83,8,59,6,"socket"],[83,14,59,12],[83,15,59,13,"emit"],[83,19,59,17],[83,20,59,18],[83,38,59,36],[83,40,59,38],[84,10,59,40,"game_mode"],[84,19,59,49],[84,21,59,51,"gameMode"],[84,29,59,59],[85,10,59,61,"user_id"],[85,17,59,68],[85,19,59,70,"user"],[85,23,59,74],[85,24,59,75,"user_id"],[86,8,59,83],[86,9,59,84],[86,10,59,85],[87,6,60,4],[88,4,61,2],[88,5,61,3],[89,4,63,2],[89,8,63,8,"leaveMatchmaking"],[89,24,63,24],[89,27,63,28,"gameMode"],[89,35,63,44],[89,39,63,49],[90,6,64,4],[90,10,64,8,"socket"],[90,16,64,14],[90,18,64,16],[91,8,65,6,"socket"],[91,14,65,12],[91,15,65,13,"emit"],[91,19,65,17],[91,20,65,18],[91,39,65,37],[91,41,65,39],[92,10,65,41,"game_mode"],[92,19,65,50],[92,21,65,52,"gameMode"],[93,8,65,61],[93,9,65,62],[93,10,65,63],[94,6,66,4],[95,4,67,2],[95,5,67,3],[96,4,69,2],[96,24,70,4],[96,28,70,4,"_reactJsxDevRuntime"],[96,47,70,4],[96,48,70,4,"jsxDEV"],[96,54,70,4],[96,56,70,5,"SocketContext"],[96,69,70,18],[96,70,70,19,"Provider"],[96,78,70,27],[97,6,70,28,"value"],[97,11,70,33],[97,13,70,35],[98,8,70,37,"socket"],[98,14,70,43],[99,8,70,45,"connected"],[99,17,70,54],[100,8,70,56,"joinMatchmaking"],[100,23,70,71],[101,8,70,73,"leaveMatchmaking"],[101,24,70,89],[102,8,70,91,"matchFound"],[103,6,70,102],[103,7,70,104],[104,6,70,104,"children"],[104,14,70,104],[104,16,71,7,"children"],[105,4,71,15],[106,6,71,15,"fileName"],[106,14,71,15],[106,16,71,15,"_jsxFileName"],[106,28,71,15],[107,6,71,15,"lineNumber"],[107,16,71,15],[108,6,71,15,"columnNumber"],[108,18,71,15],[109,4,71,15],[109,11,72,28],[109,12,72,29],[110,2,74,0],[110,3,74,1],[111,2,74,2,"_s"],[111,4,74,2],[111,5,16,13,"SocketProvider"],[111,19,16,68],[112,4,16,68],[112,12,17,19,"useAuth"],[112,24,17,26],[112,25,17,26,"useAuth"],[112,32,17,26],[113,2,17,26],[114,2,17,26,"_c"],[114,4,17,26],[114,7,16,13,"SocketProvider"],[114,21,16,68],[115,2,76,7],[115,6,76,13,"useSocket"],[115,15,76,22],[115,18,76,25,"useSocket"],[115,19,76,25],[115,24,76,31],[116,4,76,31,"_s2"],[116,7,76,31],[117,4,77,2],[117,8,77,8,"context"],[117,15,77,15],[117,18,77,18],[117,22,77,18,"useContext"],[117,28,77,28],[117,29,77,28,"useContext"],[117,39,77,28],[117,41,77,29,"SocketContext"],[117,54,77,42],[117,55,77,43],[118,4,78,2],[118,8,78,6],[118,9,78,7,"context"],[118,16,78,14],[118,18,78,16],[119,6,79,4],[119,12,79,10],[119,16,79,14,"Error"],[119,21,79,19],[119,22,79,20],[119,68,79,66],[119,69,79,67],[120,4,80,2],[121,4,81,2],[121,11,81,9,"context"],[121,18,81,16],[122,2,82,0],[122,3,82,1],[123,2,82,2,"_s2"],[123,5,82,2],[123,6,76,13,"useSocket"],[123,15,76,22],[124,2,76,22],[124,6,76,22,"_c"],[124,8,76,22],[125,2,76,22,"$RefreshReg$"],[125,14,76,22],[125,15,76,22,"_c"],[125,17,76,22],[126,0,76,22],[126,3]],"functionMap":{"names":["<global>","SocketProvider","useEffect$argument_0","socketInstance.on$argument_1","<anonymous>","joinMatchmaking","leaveMatchmaking","useSocket"],"mappings":"AAA;uECe;YCM;iCCS;KDG;oCCE;KDG;qCCE;KDG;mCCE;KDE;WEI;KFE;GDC;0BIE;GJI;2BKE;GLI;CDO;yBOE;CPM"},"hasCjsExports":false},"type":"js/module"}]}